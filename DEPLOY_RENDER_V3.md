# üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Render.com - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (5 –º–∏–Ω—É—Ç)

### –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—á–µ—Ä–µ–∑ .render.yaml)

#### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏ –∫–æ–¥ –Ω–∞ GitHub

```bash
# –í –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
git init
git add .
git commit -m "Filin Bot v3.0 - Ready for Render"
git branch -M main
git remote add origin https://github.com/–¢–í–û–ô_USERNAME/filin-bot.git
git push -u origin main
```

#### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–∏ Render –∫ GitHub

1. –ó–∞–π–¥–∏ –Ω–∞ [render.com](https://render.com)
2. –í–æ–π–¥–∏ —á–µ—Ä–µ–∑ GitHub
3. –ù–∞–∂–º–∏ **"New +"** ‚Üí **"Blueprint"**
4. –í—ã–±–µ—Ä–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `filin-bot`
5. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `.render.yaml`

#### –®–∞–≥ 3: –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç PostgreSQL –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

**–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é:**

```
BOT_TOKEN=8306362120:AAHXCXOXFk_Eam6gbfnwK0f0vTyI16RNFZo
ADMIN_IDS=1698158035,987654321
WORKERS_CHAT_ID=-1003748695791 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

#### –®–∞–≥ 4: Deploy!

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç PostgreSQL –±–∞–∑—É
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç HTTPS

---

### –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–æ–π (—á–µ—Ä–µ–∑ Dashboard)

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–π Web Service

1. **New +** ‚Üí **Web Service**
2. –í—ã–±–µ—Ä–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `filin-bot`
3. –ó–∞–ø–æ–ª–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **Name** | `filin-bot` |
| **Region** | Frankfurt (Germany) |
| **Branch** | `main` |
| **Root Directory** | (–æ—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º) |
| **Runtime** | `Python 3` |
| **Build Command** | `pip install -r requirements.txt` |
| **Start Command** | `uvicorn app.webapp.app:app --host 0.0.0.0 --port $PORT` |
| **Instance Type** | `Free` |

#### –®–∞–≥ 2: –°–æ–∑–¥–∞–π PostgreSQL

1. **New +** ‚Üí **PostgreSQL**
2. **Name**: `filin-db`
3. **Region**: Frankfurt (Germany)
4. **Plan**: Free (90 –¥–Ω–µ–π)
5. –ù–∞–∂–º–∏ **Create Database**

#### –®–∞–≥ 3: –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Dashboard —Å–µ—Ä–≤–∏—Å–∞ ‚Üí **Environment** ‚Üí **Add Environment Variable**:

```env
# Telegram Bot
BOT_TOKEN=8306362120:AAHXCXOXFk_Eam6gbfnwK0f0vTyI16RNFZo

# Database (–∏–∑ —Å–æ–∑–¥–∞–Ω–Ω–æ–π PostgreSQL)
# –°–∫–æ–ø–∏—Ä—É–π Internal Database URL –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–π:
DATABASE_URL=postgresql+asyncpg://user:password@ep-xxx.us-east-2.aws.neon.tech:5432/filin

# Web App
WEBAPP_URL=https://filin-bot.onrender.com/webapp

# Admin
ADMIN_IDS=1698158035,987654321

# Workers (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
WORKERS_CHAT_ID=-1003748695791

# Logging
LOG_PATH=logs.txt

# Default Settings
DEFAULT_SCHEDULE=–ï–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 14:00 –¥–æ 2:00
DEFAULT_CONTACTS=Phone: +7 (000) 000-00-00\nAddress: Example street, 1

# PostgreSQL Pool (–¥–ª—è free —Ç–∞—Ä–∏—Ñ–∞)
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=2
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800
```

**–í–∞–∂–Ω–æ:** –ü—Ä–µ–æ–±—Ä–∞–∑—É–π DATABASE_URL:
- –ë—ã–ª–æ: `postgresql://user:pass@host:port/db`
- –°—Ç–∞–ª–æ: `postgresql+asyncpg://user:pass@host:port/db`

#### –®–∞–≥ 4: Deploy

–ù–∞–∂–º–∏ **Create Web Service** –∏ –∂–¥–∏ 2-3 –º–∏–Ω—É—Ç—ã.

---

## üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –ü—Ä–æ–≤–µ—Ä—å –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–∞

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://filin-bot.onrender.com/health
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è:
```json
{"status": "ok", "version": "3.0", "db": "postgresql"}
```

### 2. –ü—Ä–æ–≤–µ—Ä—å WebApp

```
https://filin-bot.onrender.com/webapp
```

–î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞.

### 3. –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç–∏–∫—É

```
https://filin-bot.onrender.com/static/styles.css
```

–î–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è CSS —Ñ–∞–π–ª.

### 4. –ü—Ä–æ–≤–µ—Ä—å –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π @FilinHookah_bot –≤ Telegram
2. –ù–∞–∂–º–∏ `/start`
3. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–æ–π "–û—Ç–∫—Ä—ã—Ç—å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"

### 5. –ü—Ä–æ–≤–µ—Ä—å Menu Button

1. –í Telegram –æ—Ç–∫—Ä–æ–π –±–æ—Ç–∞
2. –°–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è –≤–≤–æ–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
3. –ï—Å–ª–∏ –Ω–µ—Ç - –Ω–∞—Å—Ç—Ä–æ–π —á–µ—Ä–µ–∑ @BotFather:
   - `/mybots` ‚Üí FilinHookah_bot
   - **Menu Button** ‚Üí –æ—Ç–ø—Ä–∞–≤—å URL: `https://filin-bot.onrender.com/webapp`

### 6. –ü—Ä–æ–≤–µ—Ä—å WebSocket

1. –û—Ç–∫—Ä–æ–π `https://filin-bot.onrender.com/admin`
2. –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `WebSocket connected`

### 7. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞—Å—Å—ã–ª–∫—É

1. –í –±–æ—Ç–µ: `/subscribers`
2. –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
3. `/broadcast` - —Ç–µ—Å—Ç–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Render Dashboard

- **Logs**: Dashboard ‚Üí Logs
- **Metrics**: Dashboard ‚Üí Metrics
- **Deployments**: Dashboard ‚Üí Deployments

### –ê–≤—Ç–æ-–¥–µ–ø–ª–æ–π

–ü—Ä–∏ `git push` –≤ –≤–µ—Ç–∫—É `main` Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç —Å–µ—Ä–≤–∏—Å.

---

## üí∞ –¢–∞—Ä–∏—Ñ—ã Render

| –¢–∞—Ä–∏—Ñ | –¶–µ–Ω–∞ | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ |
|-------|------|-------------|
| **Free** | $0 | 750 —á–∞—Å–æ–≤/–º–µ—Å, –∑–∞—Å—ã–ø–∞–µ—Ç —á–µ—Ä–µ–∑ 15 –º–∏–Ω –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ |
| **Starter** | $7/–º–µ—Å | –ù–µ –∑–∞—Å—ã–ø–∞–µ—Ç, 500 –ì–ë —Ç—Ä–∞—Ñ–∏–∫–∞ |

**–î–ª—è –Ω–∞—á–∞–ª–∞ —Ö–≤–∞—Ç–∏—Ç Free —Ç–∞—Ä–∏—Ñ–∞!**

### –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å "–∑–∞—Å—ã–ø–∞–Ω–∏—è" –Ω–∞ Free:

–ò—Å–ø–æ–ª—å–∑—É–π [UptimeRobot](https://uptimerobot.com):
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è
2. –î–æ–±–∞–≤—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: `https://filin-bot.onrender.com/health`
3. –ò–Ω—Ç–µ—Ä–≤–∞–ª: 5 –º–∏–Ω—É—Ç
4. –°–µ—Ä–≤–∏—Å –Ω–µ –±—É–¥–µ—Ç "–∑–∞—Å—ã–ø–∞—Ç—å"

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå –û—à–∏–±–∫–∞: "No module named 'asyncpg'"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å requirements.txt
pip install -r requirements.txt
```

### ‚ùå –û—à–∏–±–∫–∞: "Multiple databases detected"

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ DATABASE_URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `postgresql+asyncpg://`

### ‚ùå –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: Render Dashboard ‚Üí Logs
2. –ü—Ä–æ–≤–µ—Ä—å BOT_TOKEN –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏: Manual Deploy ‚Üí Deploy Latest Commit

### ‚ùå WebApp –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å WEBAPP_URL (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `/webapp`)
2. –ü—Ä–æ–≤–µ—Ä—å Start Command
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

### ‚ùå WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π `wss://` –¥–ª—è HTTPS
2. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –æ—à–∏–±–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ app.py

### ‚ùå –†–∞—Å—Å—ã–ª–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å `/subscribers` - –µ—Å—Ç—å –ª–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å BOT_TOKEN
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

---

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –í–Ω–µ—Å–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥:

```bash
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main
```

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç —Å–µ—Ä–≤–∏—Å (~2-3 –º–∏–Ω—É—Ç—ã).

### –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:

Render Dashboard ‚Üí Logs

---

## üìù –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Render

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:

```env
BOT_TOKEN=...              # –¢–æ–∫–µ–Ω –±–æ—Ç–∞
DATABASE_URL=...           # PostgreSQL URL
WEBAPP_URL=...             # URL WebApp
ADMIN_IDS=...              # ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:

```env
WORKERS_CHAT_ID=...        # ID —á–∞—Ç–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤
LOG_PATH=logs.txt          # –ü—É—Ç—å –∫ –ª–æ–≥–∞–º
DEFAULT_SCHEDULE=...       # –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã
DEFAULT_CONTACTS=...       # –ö–æ–Ω—Ç–∞–∫—Ç—ã
DB_POOL_SIZE=5             # –†–∞–∑–º–µ—Ä –ø—É–ª–∞ –ë–î
DB_MAX_OVERFLOW=2          # –ú–∞–∫—Å. –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ø—É–ª–∞
DB_POOL_TIMEOUT=30         # –¢–∞–π–º–∞—É—Ç –ø—É–ª–∞
DB_POOL_RECYCLE=1800       # –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ (Render –∑–∞–¥–∞—ë—Ç —Å–∞–º):

```env
PORT=...                   # –ü–æ—Ä—Ç (–Ω–µ –Ω—É–∂–Ω–æ –≤ .env)
RENDER=...                 # –§–ª–∞–≥ Render (–Ω–µ –Ω—É–∂–Ω–æ –≤ .env)
RENDER_EXTERNAL_URL=...    # URL —Å–µ—Ä–≤–∏—Å–∞ (–Ω–µ –Ω—É–∂–Ω–æ –≤ .env)
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–≤–æ–π –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Render! ü¶â

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- [ ] `/health` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status": "ok"}`
- [ ] WebApp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/start`
- [ ] Menu Button –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] WebSocket –ø–æ–¥–∫–ª—é—á—ë–Ω
- [ ] –†–∞—Å—Å—ã–ª–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–£–¥–∞—á–∏!**
